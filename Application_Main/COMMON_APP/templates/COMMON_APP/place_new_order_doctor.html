
{% load static %}
{% load crispy_forms_tags %}
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Jekyll v3.8.6">
    <title>Doctor Dashboard</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/4.4/examples/navbar-fixed/">



    <!-- Bootstrap core CSS -->
<link href="{% static 'css/itemsvendors.css' %}" rel="stylesheet">
<link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
   

    <style type="text/css">
      @import url('https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css');   

      body {
        background: url("/static/images/home_img.jpg") 10% 0 no-repeat fixed;
        background-size: 100%;
        }

        .sidenav {
          height:100vh;
          width: 0;
          position: fixed;
          z-index: 1;
          top: 0;
          left: 0;
          background-color: lightblue;
          overflow-x: hidden;
          transition: 0.5s;
          padding-top: 60px;
          margin-top:56px;
          border-radius: 5px;
         
        }
        
        .sidenav a {
          padding: 8px 8px 8px 32px;
          text-decoration: none;
          font-size:20px;
          color:black;
          display: block;
          transition: 0.3s;
        }
        
       
        
        .sidenav .closebtn {
          position: absolute;
          top: 0;
          right: 2px;
          font-size: 40px;
          
        }
        
        @media screen and (max-height: 450px) {
          .sidenav {padding-top: 15px;}
          .sidenav a {font-size: 18px;}
        }

        /* Style the sidenav links and the dropdown button */
.sidenav a, .dropdown-btn {
  padding: 6px 8px 6px 16px;
  text-decoration: none;
  font-size: 20px;
  color: 1px solid black;
  display: block;
  border: none;
  background: none;
  width:100%;
  text-align: left;
  cursor: pointer;
  outline: none;
  margin-top:10px;
  margin-bottom:10px;
}

/* On mouse-over */
.sidenav a:hover, .dropdown-btn:hover {
  color: #f1f1f1;
  background-color: #40B5AD;

}

/* Add an active class to the active dropdown button */


/* Dropdown container (hidden by default). Optional: add a lighter background color and some left padding to change the design of the dropdown content */
.dropdown-container {
  display: none;
  background-color:  #5b5b5d;
  padding-left: 8px;
}

/* Optional: Style the caret down icon */
.fa-caret-down {
  float: right;
  padding-right: 8px;
}
.fa-caret-right {
  float: right;
  padding-right: 8px;
}

.order-card {
  color: #fff;
}

.bg-c-blue {
  background: linear-gradient(50deg,#4099ff,#73b4ff);
}

.bg-c-green {
  background: linear-gradient(45deg,#2ed8b6,#59e0c5);
}

.bg-c-yellow {
  background: linear-gradient(45deg,#FFB64D,#ffcb80);
}

.bg-c-pink {
  background: linear-gradient(45deg,#FF5370,#ff869a);
}


.card {
  border-radius: 10px;
  -webkit-box-shadow: 0 1px 2.94px 0.06px rgba(4,26,55,0.16);
  box-shadow: 0 1px 2.94px 0.06px rgba(4,26,55,0.16);
  border: none;
  margin-bottom: 30px;
  -webkit-transition: all 0.3s ease-in-out;
  transition: all 0.3s ease-in-out;
  width:320px;
  
}


.card .card-block {
  padding: 25px;
}

.card .card-block-one {
padding: 8px;
width: 600px;
}

.order-card i {
  font-size: 26px;
}

.f-left {
  float: left;
}

.f-right {
  float: right;
}    



        

     
    </style>
    <!-- Custom styles for this template -->
    <link href="{% static 'css/navbar-top-fixed.css' %}" rel="stylesheet">
  </head>

  <body>
    {% include 'nav.html' %} 
    <br>

    <div id="mySidenav" class="sidenav">
			<a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a><hr>
			<!-- <a href="{% url 'create_patient'  %}">Create Patients</a> -->
      
			<a href="{% url 'dashboard'  %}">Dashboard<i class="fa fa-caret-right"></i></a>
      <div class="dropdown-divider"></div>

      <button class="dropdown-btn">Medicine<i class="fa fa-caret-down"></i></button>
			<div class="dropdown-container">
        <a href="/list_medicine/">Medicine List</a>
        <div class="dropdown-divider"></div>
        <a href="/add_medicine/">Add Medicine</a>        
      </div>
      <div class="dropdown-divider"></div>

      <button class="dropdown-btn">Staff<i class="fa fa-caret-down"></i></button>
			<div class="dropdown-container">
        <a href="{% url 'allstaff' %}">All Staff</a>            
      </div>
      <div class="dropdown-divider"></div>	
      
      <button class="dropdown-btn">Certificates<i class="fa fa-caret-down"></i></button>
			<div class="dropdown-container">
        <a href="{% url 'addpatient' %}">Bill Invoice</a>
        <div class="dropdown-divider"></div>
        <a href="{% url 'previous_issued_invoice' %}">Previous Issued Invoices</a>
        <div class="dropdown-divider"></div>
        <a href="{% url 'addcertificate' %}">Other Certificates</a>
        <div class="dropdown-divider"></div>
        <a href="{% url 'previous_issued_certificate' %}">Previous Issued Certificates</a>             
      </div>	
      <div class="dropdown-divider"></div>    
			
			<a href="{% url 'pricing' %}">Doctor Fees<i class="fa fa-caret-right"></i></a>
      <div class="dropdown-divider"></div>

      <button class="dropdown-btn">Today's Collection<i class="fa fa-caret-down"></i></button>
			<div class="dropdown-container">
        <a href="{% url 'dombivali_collection' %}">Dombivali Branch</a>
        <div class="dropdown-divider"></div>
        <a href="{% url 'mulund_collection' %}">Mulund Branch</a>                   
      </div>	
      <div class="dropdown-divider"></div>		
			<a href="{% url 'diagnosis_history' %}">Diagnosis History</a>

		</div>
		  <span style="font-size:30px;cursor:pointer;"  onclick="openNav()"><p style="padding: 2px; border: 2px solid darkblue; background:white; color:darkblue; width:50px;"><b> &#9776;</b></p></span>

    
          <div>
            {% if messages %}
                <ul class="messages">
                    {% for message in messages %}
                            <li {% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
                    {% endfor %}
                </ul>
            {% endif %}
        </div>
<main role="main" class="container">
   <br>

  <div class="jumbotron"> 

    <a href="{% url 'edit_home_page' %}" class="btn btn-info">Edit Home Page</a>

    <a href="{% url 'balance_list' 'Dombivali' %}" class="btn btn-info">Balance List Dombivali</a>

    <a href="{% url 'balance_list' 'Mulund' %}" class="btn btn-info">Balance List Mulund</a>

    <a href="{% url 'place_new_order_doctor' %}" class="btn btn-info">Place New Order</a>

 
  <br>
  <hr>

  <div class="container-new">
    <div class="left-div">
        <div class="header">Place New Order</div>
        

      <form method='post' >
          {% csrf_token %}

          {{form}}
          <br><br>
          <button type="submit" style="margin-left:80px;" >Place Order</button>
          
      </form>
    </div>
 

  <div class="right-div">
    <div class="header">Order History</div>


    <div class="scrolling-div-one">    
        

        <table class="table" id="order-table">
          <thead>
              <tr >
                  <th style="text-align:center;">Serial No.</th>
                  <th style="text-align:center;">Branch</th>
                  <th style="text-align:center;">Vendor</th>
                  <th style="text-align:center;">Order Items</th>  
                  <th style="text-align:center;">Order Date</th>
                  <th style="text-align:center;">Expected Delivery Date</th> 
                  <th style="text-align:center;">Mail</th> 

              </tr>
          </thead>
          <tbody>
            {% for medicines in orders_list %}
            <tr>
              <td  style="text-align:center;">{{forloop.counter}}</td>
              <td  style="text-align:center;">{{medicines.0.branch}}</td>
              <td  style="text-align:center;">{{medicines.0.vendors}}</td>
              <td>
                <table class="inner-table" id="order-table" >
                  <thead>
                    <tr >
                      <th style="text-align:center;">Serial No.</th>
                      <th style="text-align:center;">Medicines</th>
                      <th style="text-align:center;">Pack</th>
                      <th style="text-align:center;">Ordered Quantity</th> 
                      
                    </tr>
                  </thead>
                  <tbody>
                    {% for medicine in medicines %}
                  <tr>
                    <td style="text-align:center;">{{forloop.counter}}</td>
                    <td style="text-align:center;">{{medicine.order_medicine}} <br> ({{medicine.potency}})</td>
                    <td style="text-align:center;">{{medicine.pack}}</td>
                    <td style="text-align:center;">{{medicine.ordered_quantity}}</td>
                   
                  </tr>
                  {% endfor %}
                </tbody>
              </table>

              </td>
              <td  style="text-align:center;">{{medicines.0.order_date|date:"d F,Y"}}</td>
              <td  style="text-align:center;">{{medicines.0.expected_delivery_date|date:"d F,Y"}}</td>
              <td style="text-align:center;">
                {% if medicines.last.email_status %}
                <a href="#" class="btn btn-success">Mail Sent</a>

                {% else %}
                <a href="{% url 'place_order_doctor_mail' medicines.last.id %}" class="btn btn-dark">Send Mail</a></td>
                {% endif %}
              </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>



  </div>
</div>
  </div>
	
</main>

<script>
  function openNav() {
  document.getElementById("mySidenav").style.width = "250px";
  }
  
  function closeNav() {
  document.getElementById("mySidenav").style.width = "0";
  }
  </script>
  <script>
    var dropdown = document.getElementsByClassName("dropdown-btn");
    var i;
    
    for (i = 0; i < dropdown.length; i++) {
      dropdown[i].addEventListener("click", function() {
        this.classList.toggle("active");
        var dropdownContent = this.nextElementSibling;
        if (dropdownContent.style.display === "block") {
          dropdownContent.style.display = "none";
        } else {
          dropdownContent.style.display = "block";
        }
      });
    }
  </script>

<!-- Add this to your template -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
<script>
    $(document).ready(function () {
        $('#id_branch').on('change', function () {
          const selectedBranch = $(this).val();
          if (selectedBranch) {
            $.ajax({
              url: '/get_order_items/',  // Replace with your actual URL
              data: { branch: selectedBranch },
              dataType: 'json',
              success: function (data) {
                const orderItemsContainer = $('#order-items-container');
                orderItemsContainer.empty();
                data.forEach(function (item) {
                  orderItemsContainer.append(
                    `<input type="checkbox" name="order_items" value="${item.id}">
                     ${item.medicine} - ${item.potency}<br>`
                  );
                });
              },
            });
          }
        });
      });
</script>
</body>
</html>
